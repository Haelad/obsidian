
# 1. Что такое ОС?

ОС — программное обеспечение, управляющее компьютерами и позволяющее запускать на них прикладные программы

чаще всего используют Linux-о подобные системы из-за открытого кода Linux-а, его возможностей кастомизации под свои нужды, легко доступности, имеет много инструментов для администрирования.

Вот некоторые из них:

- (Ubuntu, Debian, CentOS, Rocky Linux, Alpine)


# 2.  Подготовка и настройка ОС

для начала нужно определится какую ОС нужно использовать. 

Чаще всего ОС различают по:

## 1. Типу ОС

- Серверные ОС
	- главная задача которых является бесперебойная работа сервера и его компонентов
	- Примеры: Ubuntu Server, Debian, CentOS/Rocky Linux, Windows Server.


- Минималистические:
		-  серверные дистрибутивы без графического интерфейса (Ubuntu Server или Debian NetInstall);

- Клиентские(Desktop)
	- главная задача которых является удобство пользователя работы с ОС 
	- Примеры: Windows 11, macOS, Ubuntu Desktop.

- **Мобильные ОС**
	- для смартфонов и планшетов.
	- Примеры: Android, iOS, HarmonyOS.

- **Встраиваемые (embedded) ОС**
	- для устройств: маршрутизаторы, умные колонки, IoT.
	- Примеры: Embedded Linux, FreeRTOS, QNX.


## 2. Типу Ядра

- **Монолитные** (ядро большое, все драйверы внутри).  
    Примеры: Linux, Windows NT.

- **Микроядерные** (ядро минимальное, всё остальное как отдельные модули).  
    Примеры: Minix, QNX.

- **Гибридные** (смесь подходов).  
    Примеры: macOS (XNU), Windows 10/11.


##  3. По доступности кода

- **Открытые (open-source)**
    - исходники доступны, можно изменять.
    - Примеры: Linux, FreeBSD.

- **Закрытые (proprietary)**
    - исходники скрыты, используется только готовый продукт.
    - Примеры: Windows, iOS.


## 4. По специализации

- **Реального времени (RTOS)** — для задач, где важна точная предсказуемая задержка (авиация, медицина, промышленность).

- **Научные / высокопроизводительные (HPC)** — оптимизированы под суперкомпьютеры.

- **Безопасные ОС** — сертифицированные для госструктур (например, Astra Linux, Red OS в России).


Для нас подойдут Серверные ОС

Подготовка к работе ОС:

- **Управление пакетами**:
    - лишние пакеты (например, `apache2`, `ftp`, `telnet`) нужно удалить.
    - установить требующихся инструментов `vim`, `htop`, `curl`, `git`, `ufw`, `fail2ban`, `docker`, `docker-compose`.

- **Обновления системы**:
    - всегда выполнять `apt update && apt upgrade` (Ubuntu/Debian) или `dnf update` (RHEL-based);
    - настраивать автоматическую установку security-патчей.

- **Хранение конфигураций**:
    - все изменения (nginx, firewall и т.п.) лучше документировать и хранить в git или github.





# 3. Управление пользователями и доступами

После выбора ос и установки нужных компонентов можно перейти к управлением пользователей и их доступом

Для чего и зачем?

Управление пользователями и доступами это механизм операционной системы, которое подразумевает под собой способ ограничения/предоставление необходимых пользователем прав и инструментов. Основная цель этого механизма - защита системы и обеспечение её корректной эксплуатации.

Пользователи

- **Root / Администратор**
    - В Linux — root, в Windows — Administrator.
    - Имеет **полный контроль над системой**.
    - Использовать root лучше **только при необходимости** — ради безопасности.

- **Обычные пользователи**
    - Работают в системе с **ограниченными правами**.
    - Могут запускать программы, хранить файлы в своей домашней директории (`/home/user`), но **не могут менять настройки системы**.
    - Это снижает риск случайных или вредоносных изменений.

- **Системные пользователи**
    - Создаются ОС или сервисами (например, `www-data` для Nginx, `postgres` для PostgreSQL).
    - Обычно не имеют пароля и **нельзя войти под ними напрямую**.
    - Нужны для того, чтобы процессы и сервисы работали **отдельно друг от друга** (изоляция для безопасности).

- **Суперпользователи (через sudo)**
    - В Linux часто не используют root напрямую.
    - Есть команда `sudo`, которая позволяет обычному пользователю **временно получить права администратора** для выполнения конкретной команды.
    - Это удобнее и безопаснее, чем всегда работать от root.


## Доступы (права доступа)

В Linux и других UNIX-подобных системах применяется модель **разделения доступа к файлам и ресурсам**.

1. **Основные права** (для каждого файла/папки):
    - **r** (read) — чтение
    - **w** (write) — запись
    - **x** (execute) — выполнение (для программ и скриптов, или доступ внутрь каталога)
    - кому принадлежат права: **Владелец** (user), **Группа** (group), **Остальные** (others)

- **ACL (Access Control Lists)**
    - Более гибкая система, чем обычные `rwx`.
    - Позволяет назначать доступы конкретным пользователям и группам (например, дать доступ к файлу только конкретному юзеру, который не является владельцем).

- **Специальные права**:
    - **SUID (Set User ID)** — программа запускается с правами владельца файла.
    - **SGID (Set Group ID)** — процесс наследует группу владельца файла/директории.
    - **Sticky bit** — в директории файлы можно удалять только их владельцу (например, `/tmp`)


На практике 

- **Root-пользователь**:
    - по умолчанию есть, но **нельзя постоянно работать под root**, так как ошибка может повредить систему.

 **Создание отдельного пользователя**:
```bash
adduser deploy
usermod -aG sudo deploy
```
>Этот пользователь сможет администрировать систему, но не будет root’ом.

## SSH

**SSH (Secure Shell)** — это сетевой протокол использующий разные криптографические методы, который используется для:

- **удалённого доступа** к серверам (обычно по командной строке),
- **безопасной передачи файлов** (через scp, sftp),
- **туннелирования** (например, проксирование трафика через сервер).

Методы шифрования:

- **Асимметричное шифрование (RSA, Ed25519, ECDSA, DSA)**
    - Используется для **аутентификации** (ключи).
    - Есть пара ключей:
        - приватный (хранится у вас, никому не показывается),
        - публичный (кладётся на сервер).
    - В связке работает так: сервер проверяет, что именно вы владелец приватного ключа, и открывает доступ.

- **Симметричное шифрование (AES, ChaCha20 и др.)**
    - Используется для **основного обмена данными** после установления соединения.
    - Быстрее асимметричного.
    - Ключ сессии создаётся при подключении.

- **Хэширование (SHA-2, SHA-3)**
    - Используется для **подписей, проверки целостности** (чтобы никто не подменил данные).


Принцип работы SSH

1. Инициализация соединения
2. Проверка подлинности сервера
3. Установление защищённого канала
4. Аутентификация клиента
5. Работа в зашифрованном канале


### 1. Генерация ключей






